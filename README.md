# –û–ª–∏–º–ø-–±–æ—Ç (Telegram)

–ë–æ—Ç-–Ω–∞–ø–æ–º–∏–Ω–∞–ª–∫–∞ –æ–ª–∏–º–ø–∏–∞–¥ –†–°–û–®: —á–∏—Ç–∞–µ—Ç —Å–≤–µ–∂–∏–µ –¥–∞—Ç—ã –∏–∑ Excel —Ñ–∞–π–ª–∞, –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ –ø—Ä–æ—Ñ–∏–ª—è–º, –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è, –∞–¥–º–∏–Ω-—Ä–∞—Å—Å—ã–ª–∫–∞.

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- üéØ **–í—ã–±–æ—Ä –ø—Ä–æ—Ñ–∏–ª–µ–π** –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏ –ø–æ–¥–ø–∏—Å–∫–∞:
  - ¬´—É—á–∏—Ç—ã–≤–∞—Ç—å –≤—Å–µ¬ª –ø–æ –ø—Ä–æ—Ñ–∏–ª—é, –ª–∏–±–æ —Ä—É—á–Ω–æ–π –≤—ã–±–æ—Ä –æ–ª–∏–º–ø–∏–∞–¥ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è;
  - –ø–æ–¥–ø–∏—Å–∫–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ `(id –æ–ª–∏–º–ø–∏–∞–¥—ã, –ø—Ä–æ—Ñ–∏–ª—å)`, —á—Ç–æ —Ä–µ—à–∞–µ—Ç –º–Ω–æ–≥–æ–ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–µ –æ–ª–∏–º–ø–∏–∞–¥—ã.
- üì¨ **–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è** –≤ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è (HH:MM) –ø–æ –¥–≤—É–º –ø–æ–ª–∏—Ç–∏–∫–∞–º:
  - **–û–∫–Ω–æ (WINDOW)** ‚Äî —Å–æ–±—ã—Ç–∏–µ –Ω–∞—Å—Ç—É–ø–∏—Ç –≤ –±–ª–∏–∂–∞–π—à–∏–µ `N` –¥–Ω–µ–π;
  - **–í–µ—Ö–∏ (MILESTONES)** ‚Äî –∑–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–Ω–∏: 7,3,2,1,0 –∏ —Ç.–ø.
- üß© **–°–ø–∏—Å–∫–∏ –ø–æ–¥–ø–∏—Å–æ–∫** –∞–∫–∫—É—Ä–∞—Ç–Ω–æ —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π, –∫–∞–∂–¥–æ–µ —Å –∫–Ω–æ–ø–∫–æ–π ¬´–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é¬ª.
- üóëÔ∏è **–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫**: –æ–¥–Ω—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∏–ª–∏ –≤—Å–µ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è.
- üì£ **–ê–¥–º–∏–Ω**: —Ä–∞—Å—Å—ã–ª–∫–∞ `/broadcast` (—Å —Ç–µ–∫—Å—Ç–æ–º —Å—Ä–∞–∑—É –∏–ª–∏ –≤ —Å–ª–µ–¥—É—é—â–µ–º —Å–æ–æ–±—â–µ–Ω–∏–∏) –∏ —Ç–µ—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π `/testnotify`.
- ‚ôªÔ∏è **Excel ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞—Ç**: –±–æ—Ç **–Ω–µ** –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –¥–∞—Ç—ã –≤ –ë–î, –∞ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø–µ—Ä–µ—á–∏—Ç—ã–≤–∞–µ—Ç —Ñ–∞–π–ª.

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   pip install -r requirements.txt
   ```

2. –û—Ç–∫—Ä–æ–π—Ç–µ `main.py` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ **–∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** –≤–≤–µ—Ä—Ö—É —Ñ–∞–π–ª–∞ (–º—ã –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è):
   ```python
   TELEGRAM_TOKEN      = '–í–ê–®_–¢–û–ö–ï–ù_–û–¢_BOTFATHER'
   EXCEL_FILE          = '–°–ø–∏—Å–æ–∫ –æ–ª–∏–º–ø–∏–∞–¥.xlsx'     # –ø—É—Ç—å –¥–æ Excel
   DB_FILE             = 'subscriptions.db'         # —Ñ–∞–π–ª –ë–î (sqlite)

   TIMEZONE            = ZoneInfo('Europe/Moscow')  # –≤–∞—à —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å
   DAILY_NOTIFY_TIME   = "12:00"                    # —Ñ–æ—Ä–º–∞—Ç HH:MM

   # —Ä–µ–∂–∏–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
   REMIND_MODE         = "WINDOW"      # "WINDOW" –∏–ª–∏ "MILESTONES"
   REMIND_WINDOW_DAYS  = 30            # –¥–ª—è WINDOW
   REMIND_DAYS_SET     = {7,3,2,1,0}   # –¥–ª—è MILESTONES
   SEND_EMPTY_INFO     = True          # –µ—Å–ª–∏ –Ω–µ—Ç —Å–æ–±—ã—Ç–∏–π ‚Äî –ø—Ä–∏—Å–ª–∞—Ç—å ¬´—Å–µ–≥–æ–¥–Ω—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –Ω–µ—Ç¬ª

   ADMIN_IDS           = {123456789}   # –≤–∞—à Telegram numeric user id
   ```

3. –ü–æ–º–µ—Å—Ç–∏—Ç–µ –≤–∞—à Excel —Ä—è–¥–æ–º —Å `main.py` (–∏–ª–∏ –ø–æ–ø—Ä–∞–≤—å—Ç–µ `EXCEL_FILE`).

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
   ```bash
   python main.py
   ```

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –ø—Ä–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫.**  
> –ï—Å–ª–∏ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–∞–∫–µ—Ç `python-telegram-bot[job-queue]`, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —à–ª—é—Ç—Å—è —á–µ—Ä–µ–∑ `JobQueue`. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –≤ –∫–æ–¥–µ –µ—Å—Ç—å **fallback-–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫** –Ω–∞ `asyncio`, –æ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –î—É–±–ª–∏–∫–∞—Ç–æ–≤ –Ω–µ –±—É–¥–µ—Ç.

---

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –°—Ç–∞—Ä—Ç –∏ –º–µ–Ω—é
–ö–æ–º–∞–Ω–¥–∞ **/start** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ, —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∞—à—É Google-—Ç–∞–±–ª–∏—Ü—É –∏ —Ç—Ä–∏ –∫–Ω–æ–ø–∫–∏:
- **üéØ –í—ã–±—Ä–∞—Ç—å –æ–ª–∏–º–ø–∏–∞–¥—É**
- **üìã –ú–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏**
- **üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É**

–ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –≤ ¬´–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é¬ª –±–æ—Ç –æ—á–∏—â–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ ¬´–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ¬ª —Å–æ–æ–±—â–µ–Ω–∏—è, —á—Ç–æ–±—ã –Ω–µ –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å –≤–∏—Å—è—â–∏–µ –±–ª–æ–∫–∏.

### –í—ã–±–æ—Ä –∏ –ø–æ–¥–ø–∏—Å–∫–∞
1) –í—ã–±–∏—Ä–∞–µ—Ç–µ **–ø—Ä–æ—Ñ–∏–ª–∏** (–º–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ).  
2) –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è ‚Äî ¬´**–£—á–∏—Ç—ã–≤–∞—Ç—å –≤—Å–µ**¬ª –ª–∏–±–æ ¬´**–í—ã–±—Ä–∞—Ç—å –≤—Ä—É—á–Ω—É—é**¬ª.  
3) –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥–ø–∏—Å–∫–∞ –≤–∏–¥–∞ `(olympiad_id, profile)`.

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–¥–ø–∏—Å–æ–∫
- –†–∞–∑–¥–µ–ª **¬´–ú–æ–∏ –ø–æ–¥–ø–∏—Å–∫–∏¬ª** —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –ø–æ–ª—è–º–∏:
  - **–ù–∞–∑–≤–∞–Ω–∏–µ**, **–ü—Ä–æ—Ñ–∏–ª—å**, **–£—Ä–æ–≤–µ–Ω—å**, **–ë–ª–∏–∂–∞–π—à–µ–µ —Å–æ–±—ã—Ç–∏–µ**, **–û–ø–∏—Å–∞–Ω–∏–µ**, **–°–∞–π—Ç**.
- –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –º–Ω–æ–≥–æ, –±–æ—Ç **—Ä–∞–∑–æ–±—å—ë—Ç** –∏—Ö –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π.
- ¬´–ë–ª–∏–∂–∞–π—à–µ–µ —Å–æ–±—ã—Ç–∏–µ¬ª –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–∑ —è—á–µ–π–∫–∏ –¥–∞—Ç: –µ—Å–ª–∏ –±—É–¥—É—â–∏–µ –¥–∞—Ç—ã –Ω–∞–π–¥–µ–Ω—ã ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –±–ª–∏–∂–∞–π—à–∞—è; –∏–Ω–∞—á–µ —Å—Ç—Ä–æ–∫–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —è—á–µ–π–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–ü–û–ö–ê –†–ê–ù–û¬ª).

### –£–¥–∞–ª–µ–Ω–∏–µ
- **¬´–£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é¬ª** ‚Äî —É–¥–∞–ª—è–µ—Ç –æ–¥–Ω—É –∑–∞–ø–∏—Å—å `(–æ–ª–∏–º–ø–∏–∞–¥–∞, –ø—Ä–æ—Ñ–∏–ª—å)`.
- **¬´–£–¥–∞–ª–∏—Ç—å –ø–æ –ø—Ä–æ—Ñ–∏–ª—é¬ª** ‚Äî —É–¥–∞–ª—è–µ—Ç –≤—Å–µ –ø–æ–¥–ø–∏—Å–∫–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è.

### –ê–¥–º–∏–Ω-—Ñ—É–Ω–∫—Ü–∏–∏
- **/broadcast** `—Ç–µ–∫—Å—Ç` ‚Äî –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –∑–∞–ø–∏—Å—å –≤ –ë–î (`users` –∏–ª–∏ `subscriptions`).  
  –ú–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å `/broadcast`, –∑–∞—Ç–µ–º —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî —Ç–µ–∫—Å—Ç —Ä–∞—Å—Å—ã–ª–∫–∏.
- **/testnotify** ‚Äî —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–≥–æ–Ω –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π **—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞**: –ø–æ–∫–∞–∂–µ—Ç, —á—Ç–æ –±—ã —É—à–ª–æ —Å–µ–≥–æ–¥–Ω—è, —Å —É—á—ë—Ç–æ–º —Ç–µ–∫—É—â–µ–π –ø–æ–ª–∏—Ç–∏–∫–∏ –∏ Excel.

---

### –ß—Ç–æ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –≤ —è—á–µ–π–∫–µ **–î–∞—Ç—ã**

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—Å–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã. –ë–æ—Ç –∏–∑–≤–ª–µ–∫–∞–µ—Ç **–≤—Å–µ –±—É–¥—É—â–∏–µ –¥–∞—Ç—ã** (–≤–∫–ª—é—á–∞—è —Å–µ–≥–æ–¥–Ω—è), –∞ –¥–ª—è –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ –±–µ—Ä—ë—Ç **–¥–∞—Ç—É –Ω–∞—á–∞–ª–∞**.
–ü—Ä–∏–º–µ—Ä—ã (–º–æ–∂–Ω–æ —Å–º–µ—à–∏–≤–∞—Ç—å –≤ –æ–¥–Ω–æ–π —è—á–µ–π–∫–µ, —Ä–∞–∑–¥–µ–ª—è—Ç—å `;`, –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏ —Å—Ç—Ä–æ–∫, –∞–∫–∫—É—Ä–∞—Ç–Ω–æ ‚Äî –∑–∞–ø—è—Ç—ã–º–∏):
```
16.02.2026/—Ñ–∏–Ω–∞–ª
01.12.2025/–Ω–∞—á–∞–ª–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏; 10.01/–æ–∫–æ–Ω—á–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
12.11‚Äì14.11.2025/–æ—á–Ω—ã–π —Ç—É—Ä
—Å 05.10 –ø–æ 20.10/–æ—Ç–±–æ—Ä
```
- –î–∞—Ç—ã **–±–µ–∑ –≥–æ–¥–∞** –ø–æ–ª—É—á–∞—Ç –≥–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏: –µ—Å–ª–∏ –¥–∞—Ç–∞ —É–∂–µ –ø—Ä–æ—à–ª–∞ –≤ —Ç–µ–∫—É—â–µ–º –≥–æ–¥—É ‚Äî –≤–æ–∑—å–º—ë—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π.
- –¢–µ–∫—Å—Ç –ø–æ—Å–ª–µ `/` ‚Äî **—è—Ä–ª—ã–∫ —Å–æ–±—ã—Ç–∏—è**.
- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —è–≤–Ω–æ ¬´–Ω–∏—á–µ–≥–æ –ø–æ–∫–∞ –Ω–µ—Ç¬ª, –Ω–∞–ø–∏—à–∏—Ç–µ `–ü–û–ö–ê –†–ê–ù–û` ‚Äî –±–æ—Ç –Ω–µ –±—É–¥–µ—Ç –∏–∑–≤–ª–µ–∫–∞—Ç—å –¥–∞—Ç—ã.

---

## –õ–æ–≥–∏–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ `DAILY_NOTIFY_TIME` –±–æ—Ç —Å—Ç—Ä–æ–∏—Ç —Å–ø–∏—Å–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏—Å—Ö–æ–¥—è –∏–∑ –ø–æ–¥–ø–∏—Å–æ–∫ –∏ —è—á–µ–µ–∫ –¥–∞—Ç:

- **WINDOW**: –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π, –≥–¥–µ `0 ‚â§ (–¥–∞—Ç–∞ ‚àí —Å–µ–≥–æ–¥–Ω—è) ‚â§ REMIND_WINDOW_DAYS`.  
- **MILESTONES**: –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `(–¥–∞—Ç–∞ ‚àí —Å–µ–≥–æ–¥–Ω—è)` –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –Ω–∞–±–æ—Ä `REMIND_DAYS_SET` (–Ω–∞–ø—Ä–∏–º–µ—Ä `{7,3,2,1,0}`).  
- –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω `SEND_EMPTY_INFO`, –∞ —Å–æ–±—ã—Ç–∏–π –Ω–µ—Ç ‚Äî –±–æ—Ç –ø—Ä–∏—à–ª—ë—Ç ¬´–°–µ–≥–æ–¥–Ω—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –Ω–µ—Ç¬ª.

–§—Ä–∞–∑—ã –≤ —Ç–µ–∫—Å—Ç–µ:
- `—Å–µ–≥–æ–¥–Ω—è`, `–∑–∞–≤—Ç—Ä–∞`, –ª–∏–±–æ `–æ—Å—Ç–∞–ª–æ—Å—å N –¥–Ω.`

---

## –ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

- **/broadcast [—Ç–µ–∫—Å—Ç]** ‚Äî —Ä–∞—Å—Å—ã–ª–∫–∞ –≤—Å–µ–º (–º–æ–∂–Ω–æ –±–µ–∑ —Ç–µ–∫—Å—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º).
- **/testnotify** ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É, —á—Ç–æ –±—ã —É—à–ª–æ —Å–µ–≥–æ–¥–Ω—è.
